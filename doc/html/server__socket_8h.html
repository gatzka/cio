<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>cio: server_socket.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">cio
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">An ANSI C Conformant I/O Library.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('server__socket_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">server_socket.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file contains the interface of a server socket.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &quot;<a class="el" href="error__code_8h_source.html">cio/error_code.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="eventloop_8h_source.html">cio/eventloop.h</a>&quot;</code><br />
<code>#include &quot;cio/export.h&quot;</code><br />
<code>#include &quot;cio/server_socket_impl.h&quot;</code><br />
<code>#include &quot;<a class="el" href="socket_8h_source.html">cio/socket.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="socket__address_8h_source.html">cio/socket_address.h</a>&quot;</code><br />
</div>
<p><a href="server__socket_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcio__server__socket.html">cio_server_socket</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="structcio__server__socket.html" title="The cio_server_socket struct describes a server socket.">cio_server_socket</a> struct describes a server socket.  <a href="structcio__server__socket.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:af532bc22ac4d1ab4f2ba957f988f3efc"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structcio__socket.html">cio_socket</a> *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="server__socket_8h.html#af532bc22ac4d1ab4f2ba957f988f3efc">cio_alloc_client_t</a>) (void)</td></tr>
<tr class="separator:af532bc22ac4d1ab4f2ba957f988f3efc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71896cded3522963b859cd8e32c7f810"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="server__socket_8h.html#a71896cded3522963b859cd8e32c7f810">cio_free_client_t</a>) (struct <a class="el" href="structcio__socket.html">cio_socket</a> *socket)</td></tr>
<tr class="separator:a71896cded3522963b859cd8e32c7f810"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a621bbed8e2dbcceb5820cbcec5717042"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="server__socket_8h.html#a621bbed8e2dbcceb5820cbcec5717042">cio_accept_handler_t</a>) (struct <a class="el" href="structcio__server__socket.html">cio_server_socket</a> *server_socket, void *handler_context, enum <a class="el" href="error__code_8h.html#ac512c4abcb0c1e747cdaaf3b917d4afe">cio_error</a> err, struct <a class="el" href="structcio__socket.html">cio_socket</a> *socket)</td></tr>
<tr class="memdesc:a621bbed8e2dbcceb5820cbcec5717042"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type of a function that is called when <a class="el" href="server__socket_8h.html#a0392fd6d35f2566eb8a6b63ccbc34b80">accept task</a> succeeds or fails.  <a href="server__socket_8h.html#a621bbed8e2dbcceb5820cbcec5717042">More...</a><br /></td></tr>
<tr class="separator:a621bbed8e2dbcceb5820cbcec5717042"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53e3ad9567bff56dcb6510270c13edd9"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="server__socket_8h.html#a53e3ad9567bff56dcb6510270c13edd9">cio_server_socket_close_hook_t</a>) (struct <a class="el" href="structcio__server__socket.html">cio_server_socket</a> *server_socket)</td></tr>
<tr class="memdesc:a53e3ad9567bff56dcb6510270c13edd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type of close hook function.  <a href="server__socket_8h.html#a53e3ad9567bff56dcb6510270c13edd9">More...</a><br /></td></tr>
<tr class="separator:a53e3ad9567bff56dcb6510270c13edd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aab09aac4c85f0e66d1f298b35da63585"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="error__code_8h.html#ac512c4abcb0c1e747cdaaf3b917d4afe">cio_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="server__socket_8h.html#aab09aac4c85f0e66d1f298b35da63585">cio_server_socket_init</a> (struct <a class="el" href="structcio__server__socket.html">cio_server_socket</a> *server_socket, struct cio_eventloop *loop, unsigned int backlog, enum <a class="el" href="address__family_8h.html#afe76b1062e903b21af3c397ca6c98b7c">cio_address_family</a> family, <a class="el" href="server__socket_8h.html#af532bc22ac4d1ab4f2ba957f988f3efc">cio_alloc_client_t</a> alloc_client, <a class="el" href="server__socket_8h.html#a71896cded3522963b859cd8e32c7f810">cio_free_client_t</a> free_client, uint64_t close_timeout_ns, <a class="el" href="server__socket_8h.html#a53e3ad9567bff56dcb6510270c13edd9">cio_server_socket_close_hook_t</a> close_hook)</td></tr>
<tr class="memdesc:aab09aac4c85f0e66d1f298b35da63585"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a <a class="el" href="structcio__server__socket.html" title="The cio_server_socket struct describes a server socket.">cio_server_socket</a>.  <a href="server__socket_8h.html#aab09aac4c85f0e66d1f298b35da63585">More...</a><br /></td></tr>
<tr class="separator:aab09aac4c85f0e66d1f298b35da63585"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0392fd6d35f2566eb8a6b63ccbc34b80"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="error__code_8h.html#ac512c4abcb0c1e747cdaaf3b917d4afe">cio_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="server__socket_8h.html#a0392fd6d35f2566eb8a6b63ccbc34b80">cio_server_socket_accept</a> (struct <a class="el" href="structcio__server__socket.html">cio_server_socket</a> *server_socket, <a class="el" href="server__socket_8h.html#a621bbed8e2dbcceb5820cbcec5717042">cio_accept_handler_t</a> handler, void *handler_context)</td></tr>
<tr class="memdesc:a0392fd6d35f2566eb8a6b63ccbc34b80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Accepts an incoming socket connection.  <a href="server__socket_8h.html#a0392fd6d35f2566eb8a6b63ccbc34b80">More...</a><br /></td></tr>
<tr class="separator:a0392fd6d35f2566eb8a6b63ccbc34b80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa096713acd80f09850d62576cb3d7616"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="server__socket_8h.html#aa096713acd80f09850d62576cb3d7616">cio_server_socket_close</a> (struct <a class="el" href="structcio__server__socket.html">cio_server_socket</a> *server_socket)</td></tr>
<tr class="memdesc:aa096713acd80f09850d62576cb3d7616"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the server socket.  <a href="server__socket_8h.html#aa096713acd80f09850d62576cb3d7616">More...</a><br /></td></tr>
<tr class="separator:aa096713acd80f09850d62576cb3d7616"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a032a9252ca8b6472c5160b5d14110bc0"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="error__code_8h.html#ac512c4abcb0c1e747cdaaf3b917d4afe">cio_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="server__socket_8h.html#a032a9252ca8b6472c5160b5d14110bc0">cio_server_socket_bind</a> (struct <a class="el" href="structcio__server__socket.html">cio_server_socket</a> *server_socket, const struct <a class="el" href="structcio__socket__address.html">cio_socket_address</a> *endpoint)</td></tr>
<tr class="memdesc:a032a9252ca8b6472c5160b5d14110bc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Binds the <a class="el" href="structcio__server__socket.html" title="The cio_server_socket struct describes a server socket.">cio_server_socket</a> to a specific address.  <a href="server__socket_8h.html#a032a9252ca8b6472c5160b5d14110bc0">More...</a><br /></td></tr>
<tr class="separator:a032a9252ca8b6472c5160b5d14110bc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bdc6140d5479d450821c149436c8d26"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="error__code_8h.html#ac512c4abcb0c1e747cdaaf3b917d4afe">cio_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="server__socket_8h.html#a6bdc6140d5479d450821c149436c8d26">cio_server_socket_set_reuse_address</a> (const struct <a class="el" href="structcio__server__socket.html">cio_server_socket</a> *server_socket, bool on)</td></tr>
<tr class="memdesc:a6bdc6140d5479d450821c149436c8d26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the SO_REUSEADDR socket option.  <a href="server__socket_8h.html#a6bdc6140d5479d450821c149436c8d26">More...</a><br /></td></tr>
<tr class="separator:a6bdc6140d5479d450821c149436c8d26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f39e3ba7bce9ddf7082fe6e0a01a8eb"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="error__code_8h.html#ac512c4abcb0c1e747cdaaf3b917d4afe">cio_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="server__socket_8h.html#a3f39e3ba7bce9ddf7082fe6e0a01a8eb">cio_server_socket_set_tcp_fast_open</a> (const struct <a class="el" href="structcio__server__socket.html">cio_server_socket</a> *server_socket, bool on)</td></tr>
<tr class="memdesc:a3f39e3ba7bce9ddf7082fe6e0a01a8eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables/disables TCP Fast Open.  <a href="server__socket_8h.html#a3f39e3ba7bce9ddf7082fe6e0a01a8eb">More...</a><br /></td></tr>
<tr class="separator:a3f39e3ba7bce9ddf7082fe6e0a01a8eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains the interface of a server socket. </p>
<p>A server socket can be <a class="el" href="server__socket_8h.html#aab09aac4c85f0e66d1f298b35da63585">initialized</a>, <a class="el" href="server__socket_8h.html#a0392fd6d35f2566eb8a6b63ccbc34b80">accept connections</a> and can be <a class="el" href="server__socket_8h.html#aa096713acd80f09850d62576cb3d7616">closed</a>. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a621bbed8e2dbcceb5820cbcec5717042"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a621bbed8e2dbcceb5820cbcec5717042">&#9670;&nbsp;</a></span>cio_accept_handler_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* cio_accept_handler_t) (struct <a class="el" href="structcio__server__socket.html">cio_server_socket</a> *server_socket, void *handler_context, enum <a class="el" href="error__code_8h.html#ac512c4abcb0c1e747cdaaf3b917d4afe">cio_error</a> err, struct <a class="el" href="structcio__socket.html">cio_socket</a> *socket)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The type of a function that is called when <a class="el" href="server__socket_8h.html#a0392fd6d35f2566eb8a6b63ccbc34b80">accept task</a> succeeds or fails. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server_socket</td><td>The server socket where the accept was called on. </td></tr>
    <tr><td class="paramname">handler_context</td><td>The context the functions works on. </td></tr>
    <tr><td class="paramname">err</td><td>If err != <a class="el" href="error__code_8h.html#ac512c4abcb0c1e747cdaaf3b917d4afea6bb29544c99750c61f70b10a1e17d96a">CIO_SUCCESS</a>, the accept call failed. Please note that no memory for a client is allocated if err != <a class="el" href="error__code_8h.html#ac512c4abcb0c1e747cdaaf3b917d4afea6bb29544c99750c61f70b10a1e17d96a">CIO_SUCCESS</a>. So NEVER close <em>socket</em> in that case. </td></tr>
    <tr><td class="paramname">socket</td><td>The client socket that was created from the accept. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af532bc22ac4d1ab4f2ba957f988f3efc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af532bc22ac4d1ab4f2ba957f988f3efc">&#9670;&nbsp;</a></span>cio_alloc_client_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structcio__socket.html">cio_socket</a>*(* cio_alloc_client_t) (void)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a71896cded3522963b859cd8e32c7f810"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71896cded3522963b859cd8e32c7f810">&#9670;&nbsp;</a></span>cio_free_client_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* cio_free_client_t) (struct <a class="el" href="structcio__socket.html">cio_socket</a> *socket)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a53e3ad9567bff56dcb6510270c13edd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53e3ad9567bff56dcb6510270c13edd9">&#9670;&nbsp;</a></span>cio_server_socket_close_hook_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* cio_server_socket_close_hook_t) (struct <a class="el" href="structcio__server__socket.html">cio_server_socket</a> *server_socket)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The type of close hook function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server_socket</td><td>The cio_linux_server_socket the close hook was called on. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a0392fd6d35f2566eb8a6b63ccbc34b80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0392fd6d35f2566eb8a6b63ccbc34b80">&#9670;&nbsp;</a></span>cio_server_socket_accept()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="error__code_8h.html#ac512c4abcb0c1e747cdaaf3b917d4afe">cio_error</a> cio_server_socket_accept </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcio__server__socket.html">cio_server_socket</a> *&#160;</td>
          <td class="paramname"><em>server_socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="server__socket_8h.html#a621bbed8e2dbcceb5820cbcec5717042">cio_accept_handler_t</a>&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>handler_context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Accepts an incoming socket connection. </p>
<p>If the platform specific accept implementation fails, <code>handler</code> will be called with a appropriate error code. The implementation specific accept needs to take care of freeing any intermediatly allocated memory, so there is no need to free any resources in <code>handler</code> if <code>handler</code> is called with err != <a class="el" href="error__code_8h.html#ac512c4abcb0c1e747cdaaf3b917d4afea6bb29544c99750c61f70b10a1e17d96a">CIO_SUCCESS</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server_socket</td><td>A pointer to a <a class="el" href="structcio__server__socket.html" title="The cio_server_socket struct describes a server socket.">cio_server_socket</a> on which the accept should be performed. </td></tr>
    <tr><td class="paramname">handler</td><td>The function to be called if the accept fails or succeeds. </td></tr>
    <tr><td class="paramname">handler_context</td><td>The context passed to the <em>handler</em> function.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="error__code_8h.html#ac512c4abcb0c1e747cdaaf3b917d4afea6bb29544c99750c61f70b10a1e17d96a">CIO_SUCCESS</a> for success. </dd></dl>

</div>
</div>
<a id="a032a9252ca8b6472c5160b5d14110bc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a032a9252ca8b6472c5160b5d14110bc0">&#9670;&nbsp;</a></span>cio_server_socket_bind()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="error__code_8h.html#ac512c4abcb0c1e747cdaaf3b917d4afe">cio_error</a> cio_server_socket_bind </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcio__server__socket.html">cio_server_socket</a> *&#160;</td>
          <td class="paramname"><em>server_socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structcio__socket__address.html">cio_socket_address</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Binds the <a class="el" href="structcio__server__socket.html" title="The cio_server_socket struct describes a server socket.">cio_server_socket</a> to a specific address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server_socket</td><td>A pointer to a <a class="el" href="structcio__server__socket.html" title="The cio_server_socket struct describes a server socket.">cio_server_socket</a> on which the bind should be performed. </td></tr>
    <tr><td class="paramname">endpoint</td><td>The socket address to bind to.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="error__code_8h.html#ac512c4abcb0c1e747cdaaf3b917d4afea6bb29544c99750c61f70b10a1e17d96a">CIO_SUCCESS</a> for success. </dd></dl>

</div>
</div>
<a id="aa096713acd80f09850d62576cb3d7616"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa096713acd80f09850d62576cb3d7616">&#9670;&nbsp;</a></span>cio_server_socket_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cio_server_socket_close </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcio__server__socket.html">cio_server_socket</a> *&#160;</td>
          <td class="paramname"><em>server_socket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes the server socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server_socket</td><td>A pointer to a <a class="el" href="structcio__server__socket.html" title="The cio_server_socket struct describes a server socket.">cio_server_socket</a> on which the close should be performed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aab09aac4c85f0e66d1f298b35da63585"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab09aac4c85f0e66d1f298b35da63585">&#9670;&nbsp;</a></span>cio_server_socket_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="error__code_8h.html#ac512c4abcb0c1e747cdaaf3b917d4afe">cio_error</a> cio_server_socket_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcio__server__socket.html">cio_server_socket</a> *&#160;</td>
          <td class="paramname"><em>server_socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct cio_eventloop *&#160;</td>
          <td class="paramname"><em>loop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>backlog</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="address__family_8h.html#afe76b1062e903b21af3c397ca6c98b7c">cio_address_family</a>&#160;</td>
          <td class="paramname"><em>family</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="server__socket_8h.html#af532bc22ac4d1ab4f2ba957f988f3efc">cio_alloc_client_t</a>&#160;</td>
          <td class="paramname"><em>alloc_client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="server__socket_8h.html#a71896cded3522963b859cd8e32c7f810">cio_free_client_t</a>&#160;</td>
          <td class="paramname"><em>free_client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>close_timeout_ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="server__socket_8h.html#a53e3ad9567bff56dcb6510270c13edd9">cio_server_socket_close_hook_t</a>&#160;</td>
          <td class="paramname"><em>close_hook</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a <a class="el" href="structcio__server__socket.html" title="The cio_server_socket struct describes a server socket.">cio_server_socket</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server_socket</td><td>The <a class="el" href="structcio__server__socket.html" title="The cio_server_socket struct describes a server socket.">cio_server_socket</a> that should be initialized. </td></tr>
    <tr><td class="paramname">loop</td><td>The event loop the server socket shall operate on. </td></tr>
    <tr><td class="paramname">backlog</td><td>The minimal length of the listen queue. </td></tr>
    <tr><td class="paramname">family</td><td>The address family for that socket (either <a class="el" href="address__family_8h.html#afe76b1062e903b21af3c397ca6c98b7cac5d1cff8a62dc9600bc8585b12f5aa6c">CIO_ADDRESS_FAMILY_INET4</a> or <a class="el" href="address__family_8h.html#afe76b1062e903b21af3c397ca6c98b7ca268463c1d5aa567ebb80c7865570b36a">CIO_ADDRESS_FAMILY_INET6</a>). </td></tr>
    <tr><td class="paramname">alloc_client</td><td>An allocator function that is called if a client connects to the server. </td></tr>
    <tr><td class="paramname">free_client</td><td>This function is called after closing a <a class="el" href="structcio__socket.html">cio_socket</a>. It can and should be used to free resources allocated with <code>alloc_client</code>. </td></tr>
    <tr><td class="paramname">close_timeout_ns</td><td>The timeout in ns until a closed TCP connection waits for a TCP FIN packet from the remote peer before sending a TCP RST.If you set this parameter to &gt;0, you can effectivly control how long the TCP socket stays in the FIN_WAIT_2 state. Setting this parameter to 0 leaves it up to the operating system to get the socket out of FIN_WAIT_2. </td></tr>
    <tr><td class="paramname">close_hook</td><td>A close hook function. If this parameter is non <code>NULL</code>, the function will be called directly after <a class="el" href="server__socket_8h.html#aa096713acd80f09850d62576cb3d7616">closing</a> the <a class="el" href="structcio__server__socket.html" title="The cio_server_socket struct describes a server socket.">cio_server_socket</a>. It is guaranteed the the cio library will not access any memory of <a class="el" href="structcio__server__socket.html" title="The cio_server_socket struct describes a server socket.">cio_server_socket</a> that is passed to the close hook. Therefore the hook could be used to free the memory associated with the server socket. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="error__code_8h.html#ac512c4abcb0c1e747cdaaf3b917d4afea6bb29544c99750c61f70b10a1e17d96a">CIO_SUCCESS</a> for success. </dd></dl>

</div>
</div>
<a id="a6bdc6140d5479d450821c149436c8d26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bdc6140d5479d450821c149436c8d26">&#9670;&nbsp;</a></span>cio_server_socket_set_reuse_address()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="error__code_8h.html#ac512c4abcb0c1e747cdaaf3b917d4afe">cio_error</a> cio_server_socket_set_reuse_address </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structcio__server__socket.html">cio_server_socket</a> *&#160;</td>
          <td class="paramname"><em>server_socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>on</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the SO_REUSEADDR socket option. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server_socket</td><td>A pointer to a <a class="el" href="structcio__server__socket.html" title="The cio_server_socket struct describes a server socket.">cio_server_socket</a> for which the socket option should be set. </td></tr>
    <tr><td class="paramname">on</td><td>Whether the socket option should be enabled or disabled.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="error__code_8h.html#ac512c4abcb0c1e747cdaaf3b917d4afea6bb29544c99750c61f70b10a1e17d96a">CIO_SUCCESS</a> for success. </dd></dl>

</div>
</div>
<a id="a3f39e3ba7bce9ddf7082fe6e0a01a8eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f39e3ba7bce9ddf7082fe6e0a01a8eb">&#9670;&nbsp;</a></span>cio_server_socket_set_tcp_fast_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="error__code_8h.html#ac512c4abcb0c1e747cdaaf3b917d4afe">cio_error</a> cio_server_socket_set_tcp_fast_open </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structcio__server__socket.html">cio_server_socket</a> *&#160;</td>
          <td class="paramname"><em>server_socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>on</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables/disables TCP Fast Open. </p>
<p>This function enables TCP Fast Open according to <a href="https://tools.ietf.org/html/rfc7413">RFC 7413</a>. Please not that it might not be sufficient to enable this socket option to use TCP Fast Open. Operating systems may require to enable this feature. On Linux you have to set <code>sysctl -w net.ipv4.tcp_fastopen=1</code> to enable TCP Fast Open for client sockets, <code>sysctl -w net.ipv4.tcp_fastopen=2</code> to enable TCP Fast Open for listen sockets and <code>sysctl -w net.ipv4.tcp_fastopen=3</code> to enable TCP Fast Open for both client and listen sockets.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server_socket</td><td>The server socket for which TCP Fast Open should be enabled. </td></tr>
    <tr><td class="paramname">on</td><td><code>true</code> if TCP Fast Opens should be enabled, <code>false</code> if not. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>:: CIO_SUCCESS for success. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="server__socket_8h.html">server_socket.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
